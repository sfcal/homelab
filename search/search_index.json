{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Homelab Infrastructure as Code","text":"<p>Welcome to the Homelab Infrastructure as Code documentation! This guide will help you deploy and manage a complete Kubernetes homelab environment using modern DevOps practices.</p>"},{"location":"#what-is-this-project","title":"What is this project?","text":"<p>This repository contains a complete infrastructure-as-code solution for managing a home Kubernetes cluster running on Proxmox VMs. It automates the entire lifecycle:</p> <ul> <li>VM Template Creation with Packer</li> <li>Infrastructure Provisioning with Terraform  </li> <li>Kubernetes Deployment with Ansible</li> <li>Application Management with Flux GitOps</li> </ul>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li>Quick Start Guide - Get up and running in minutes</li> <li>Prerequisites - What you need before starting</li> <li>Network Layout - Understanding the network architecture</li> <li>FAQ - Frequently asked questions</li> </ul>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>\ud83d\ude80 Fully Automated - From bare metal to running services</li> <li>\ud83c\udfd7\ufe0f Infrastructure as Code - Everything is version controlled</li> <li>\ud83d\udd04 GitOps Ready - Flux manages your Kubernetes applications</li> <li>\ud83d\udce6 Modular Design - Use only what you need</li> <li>\ud83c\udf0d Multi-Environment - Separate dev and prod configurations</li> </ul>"},{"location":"#architecture-overview","title":"Architecture Overview","text":"<pre><code>graph TD\n    A[Proxmox Hosts] --&gt; B[Packer Templates]\n    B --&gt; C[Terraform VMs]\n    C --&gt; D[Ansible K3s]\n    D --&gt; E[Flux GitOps]\n    E --&gt; F[Applications]</code></pre>"},{"location":"#technology-stack","title":"Technology Stack","text":"Component Technology Purpose Virtualization Proxmox VE VM hosting platform VM Templates Packer Automated template creation Infrastructure Terraform VM provisioning Configuration Ansible K3s deployment Kubernetes K3s Lightweight Kubernetes GitOps FluxCD Application deployment Storage Longhorn Distributed storage Ingress Traefik Reverse proxy Monitoring Prometheus + Grafana Metrics and visualization"},{"location":"#getting-help","title":"Getting Help","text":"<ul> <li>\ud83d\udcd6 Browse the full documentation</li> <li>\ud83d\udc1b Report issues on GitHub</li> <li>\ud83d\udcac Join the discussion on GitHub Discussions</li> </ul>"},{"location":"reference/faq/","title":"Frequently Asked Questions","text":""},{"location":"reference/faq/#general-questions","title":"General Questions","text":""},{"location":"reference/faq/#what-is-this-project","title":"What is this project?","text":"<p>This is a complete Infrastructure as Code (IaC) solution for deploying and managing a Kubernetes homelab. It automates everything from VM creation to application deployment using industry-standard tools like Packer, Terraform, Ansible, and Flux.</p>"},{"location":"reference/faq/#what-do-i-need-to-run-this","title":"What do I need to run this?","text":"<p>At minimum, you need: - A Proxmox server with at least 32GB RAM and 500GB storage - Docker installed on your local machine - Basic networking knowledge - Patience and willingness to learn!</p>"},{"location":"reference/faq/#is-this-production-ready","title":"Is this production-ready?","text":"<p>While this project uses production-grade tools and practices, it's designed for homelab use. For production environments, you'd want to add: - High availability Proxmox cluster - Proper backup solutions - Security hardening - Monitoring and alerting</p>"},{"location":"reference/faq/#installation-issues","title":"Installation Issues","text":""},{"location":"reference/faq/#packer-build-fails-with-401-unauthorized","title":"Packer build fails with \"401 Unauthorized\"","text":"<p>This usually means your Proxmox API token is incorrect. Verify: 1. Token exists in Proxmox 2. Token has the required permissions 3. Token format is correct: <code>user@realm!tokenname</code></p>"},{"location":"reference/faq/#terraform-cant-find-the-template","title":"Terraform can't find the template","text":"<p>Ensure: 1. Packer build completed successfully 2. Template name in Terraform matches what Packer created 3. You're targeting the correct Proxmox node</p>"},{"location":"reference/faq/#ansible-cant-connect-to-vms","title":"Ansible can't connect to VMs","text":"<p>Check: 1. VMs have the correct IP addresses 2. SSH key was properly injected via cloud-init 3. No firewall blocking SSH (port 22) 4. You can manually SSH to the VMs</p>"},{"location":"reference/faq/#k3s-installation-hangs","title":"K3s installation hangs","text":"<p>Common causes: 1. Network connectivity between nodes 2. Firewall blocking required ports 3. Incorrect <code>apiserver_endpoint</code> configuration 4. DNS resolution issues</p>"},{"location":"reference/faq/#networking-questions","title":"Networking Questions","text":""},{"location":"reference/faq/#can-i-use-different-ip-ranges","title":"Can I use different IP ranges?","text":"<p>Yes! Update these files: - <code>terraform/environments/dev/main.tf</code> - VM IP configuration - <code>ansible/environments/dev/hosts.ini</code> - Ansible inventory - <code>ansible/environments/dev/group_vars/all.yml</code> - K3s configuration</p>"},{"location":"reference/faq/#how-do-i-access-services-from-outside","title":"How do I access services from outside?","text":"<p>You have several options: 1. Port forwarding on your router to MetalLB IPs 2. Reverse proxy like nginx on your network 3. VPN access to your homelab network 4. Cloudflare Tunnel for secure external access</p>"},{"location":"reference/faq/#why-cant-i-resolve-localsamuelcalvertcom","title":"Why can't I resolve *.local.samuelcalvert.com?","text":"<p>You need to: 1. Add DNS entries pointing to your MetalLB IP range 2. Or add entries to your <code>/etc/hosts</code> file 3. Or use a tool like dnsmasq for local DNS</p>"},{"location":"reference/faq/#resource-questions","title":"Resource Questions","text":""},{"location":"reference/faq/#how-much-ram-do-i-really-need","title":"How much RAM do I really need?","text":"<p>Minimum for dev environment: - 3 masters \u00d7 4GB = 12GB - 2 workers \u00d7 4GB = 8GB - Total: 20GB for VMs + overhead</p> <p>Recommended: 32GB+ for comfortable operation</p>"},{"location":"reference/faq/#can-i-run-with-fewer-vms","title":"Can I run with fewer VMs?","text":"<p>Yes, but with limitations: - Single master: No HA, risky for learning - No workers: Workloads run on masters (not recommended) - Minimum recommended: 1 master + 1 worker</p>"},{"location":"reference/faq/#how-much-storage-will-i-use","title":"How much storage will I use?","text":"<p>Base usage: - VM templates: ~5GB each - VMs: ~20-50GB each - Applications: Varies greatly</p> <p>Plan for at least 250GB for a basic setup.</p>"},{"location":"reference/faq/#application-questions","title":"Application Questions","text":""},{"location":"reference/faq/#how-do-i-add-my-own-applications","title":"How do I add my own applications?","text":"<ol> <li>Create manifests in <code>kubernetes/apps/base/</code></li> <li>Add environment-specific configs in <code>kubernetes/apps/dev/</code></li> <li>Update <code>kustomization.yaml</code> files</li> <li>Commit and push - Flux will deploy automatically</li> </ol>"},{"location":"reference/faq/#can-i-use-helm-charts","title":"Can I use Helm charts?","text":"<p>Yes! Flux supports Helm. Create a <code>HelmRelease</code> resource:</p> <pre><code>apiVersion: helm.toolkit.fluxcd.io/v2\nkind: HelmRelease\nmetadata:\n  name: my-app\n  namespace: default\nspec:\n  interval: 5m\n  chart:\n    spec:\n      chart: my-chart\n      version: '1.0.0'\n      sourceRef:\n        kind: HelmRepository\n        name: my-repo\n</code></pre>"},{"location":"reference/faq/#how-do-i-update-applications","title":"How do I update applications?","text":"<p>For GitOps-managed apps: 1. Update manifests in Git 2. Push changes 3. Flux automatically syncs</p> <p>For manual updates: <pre><code>kubectl set image deployment/app app=image:newtag\n</code></pre></p>"},{"location":"reference/faq/#troubleshooting","title":"Troubleshooting","text":""},{"location":"reference/faq/#how-do-i-check-flux-status","title":"How do I check Flux status?","text":"<pre><code># Overall status\nflux get all\n\n# Specific resources\nflux get kustomizations\nflux get helmreleases\n\n# Logs\nflux logs --follow\n</code></pre>"},{"location":"reference/faq/#where-are-the-logs","title":"Where are the logs?","text":"<ul> <li>Proxmox: <code>/var/log/pve/</code></li> <li>K3s: <code>journalctl -u k3s</code></li> <li>Pods: <code>kubectl logs &lt;pod-name&gt;</code></li> <li>Flux: <code>flux logs</code></li> </ul>"},{"location":"reference/faq/#how-do-i-reset-everything","title":"How do I reset everything?","text":"<p>To start over:</p> <pre><code># Destroy VMs\ncd terraform/environments/dev\nterraform destroy\n\n# Clean up templates (optional)\n# Manually delete from Proxmox UI\n\n# Reset local state\nrm -rf terraform/environments/dev/.terraform\nrm -f terraform/environments/dev/terraform.tfstate*\n</code></pre>"},{"location":"reference/faq/#best-practices","title":"Best Practices","text":""},{"location":"reference/faq/#should-i-modify-the-base-files","title":"Should I modify the base files?","text":"<p>No, use the environment-specific overrides: - <code>environments/dev/</code> for development - <code>environments/prod/</code> for production</p>"},{"location":"reference/faq/#how-do-i-handle-secrets","title":"How do I handle secrets?","text":"<ol> <li>Never commit secrets to Git</li> <li>Use Kubernetes secrets</li> <li>Consider tools like Sealed Secrets or External Secrets</li> <li>Use <code>.gitignore</code> for sensitive files</li> </ol>"},{"location":"reference/faq/#how-do-i-backup-my-cluster","title":"How do I backup my cluster?","text":"<p>Consider: 1. VM level: Proxmox backup/snapshots 2. Application level: Velero for Kubernetes 3. Data level: Application-specific backups 4. GitOps: Your Git repo is your source of truth</p>"},{"location":"reference/faq/#getting-help","title":"Getting Help","text":""},{"location":"reference/faq/#where-can-i-get-more-help","title":"Where can I get more help?","text":"<ol> <li>Check the documentation</li> <li>Search existing issues</li> <li>Ask in discussions</li> <li>Open a new issue with details</li> </ol>"},{"location":"reference/faq/#how-can-i-contribute","title":"How can I contribute?","text":"<p>We welcome contributions! See CONTRIBUTING.md for guidelines.</p>"},{"location":"reference/faq/#i-found-a-security-issue","title":"I found a security issue","text":"<p>Please report security issues privately to samuel.f.calvert@gmail.com instead of public issues.</p>"}]}